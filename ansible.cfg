# =============================================================================
# Ansible Configuration - Docker-based Lab (Production-Aligned)
# =============================================================================

[defaults]
# -----------------------------------------------------------------------------
# Inventory & Execution
# -----------------------------------------------------------------------------
inventory = inventory/hosts.ini
interpreter_python = /usr/bin/python3

# -----------------------------------------------------------------------------
# Performance & Reliability
# -----------------------------------------------------------------------------
forks = 10
timeout = 30
gathering = smart

# -----------------------------------------------------------------------------
# SSH Behavior (CI/CD Safe)
# -----------------------------------------------------------------------------
host_key_checking = False
pipelining = True

# -----------------------------------------------------------------------------
# Fact Caching
# -----------------------------------------------------------------------------
fact_caching = jsonfile
#fact_caching_connection = .facts
fact_caching_connection = /home/ansible/.ansible/facts
fact_caching_timeout = 86400

# -----------------------------------------------------------------------------
# Output & Logging
# -----------------------------------------------------------------------------
stdout_callback = yaml
display_skipped_hosts = False
retry_files_enabled = False
log_path = ansible.log

# -----------------------------------------------------------------------------
# Paths
# -----------------------------------------------------------------------------
roles_path = roles
collections_paths = collections
library = library
callback_plugins = plugins/callback
filter_plugins = plugins/filter

# -----------------------------------------------------------------------------
# Security Defaults
# -----------------------------------------------------------------------------
deprecation_warnings = False
nocows = True

# =============================================================================
# SSH Connection Settings
# =============================================================================
[ssh_connection]
ssh_args = -o ControlMaster=auto \
           -o ControlPersist=60s \
           -o UserKnownHostsFile=/dev/null \
           -o StrictHostKeyChecking=no
control_path = %(directory)s/%%h-%%r

